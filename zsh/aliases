# ruby

alias b='bundle exec'
alias r='bundle exec rake'
alias rr='rake routes'
alias fs='foreman start'
alias fr='foreman run'
alias frrc='foreman run rails console'
alias rspec="bundle exec rspec"
alias rks='rake konacha:serve'
alias rdbm='rake db:migrate; rake test:prepare'

alias v='vim'

# listing files

alias l='ls -lh'
alias ll='ls -lah'

# bower
alias bower='noglob bower'

# www
alias www='python -m SimpleHTTPServer'

# tmux
alias ta='tmux attach'
alias tn='tmux new -s'
alias tl='tmux ls'
alias tpn='tmux -S /tmp/pair new -s pair && chmod 755 /tmp/pair'
alias tpa='tmux -S /tmp/pair attach -t pair'
alias tpl='tmux -S /tmp/pair ls'

# git
alias s='git status -sb $argv; return 0'
alias d='gd $argv'

if [ `uname` = 'Darwin' ]; then
  alias ls='ls -G'
  alias du='du -k -d 1 $argv'
else
  alias ls='ls --color=auto'
  alias du='du -k --max-depth=1 $argv'
fi

alias ga='git add -A'
alias gap='ga -p'
alias gau='git add -u'
alias gbr='git branch -v'
gc() {
  git diff --cached | grep '\btap[ph]\b' >/dev/null &&
    echo "\e[0;31;29mOops, there's a #tapp or similar in that diff.\e[0m" ||
    git commit -v "$@"
}
alias gc!='git commit -v'
alias gca='git commit -v -a'
alias gcam='gca --amend'
alias gcp='git cherry-pick'
alias gcm='git commit -v --amend'
alias gco='git checkout'
alias gcop='gco -p'
alias gd='git diff -M'
alias gd.='git diff -M --color-words="."'
gdbr() {
  ref="$1"
  shift
  git diff -M "$@" $(git merge-base HEAD "$ref").."$ref"
}
alias gdc='git diff --cached -M'
alias gdc.='git diff --cached -M --color-words="."'
alias gf='git fetch'
git-new() {
  [ -d "$1" ] || mkdir "$1" &&
  cd "$1" &&
  git init &&
  touch .gitignore &&
  git add .gitignore &&
  git commit -m "Added .gitignore."
}
git_current_branch() {
  cat "$(git rev-parse --git-dir 2>/dev/null)/HEAD" | sed -e 's/^.*refs\/heads\///'
}
alias glog='git log --date-order --pretty="format:%C(yellow)%h%C(cyan)%d%Creset %s %C(white) %an, %ar%Creset"'
alias gl='glog --graph'
alias gla='gl --all'
gls() {
  query="$1"
  shift
  glog --pickaxe-regex "-S$query" "$@"
}
alias gm='git merge --no-ff'
alias gmf='git merge --ff-only'
alias gmfthis='gmf origin/$(git_current_branch)'
alias gp='git push'
alias gpthis='gp origin $(git_current_branch)'
alias gr='git reset'
alias grb='git rebase -p'
alias grbthis='grb origin/$(git_current_branch)'
alias grbc='git rebase --continue'
alias grbi='git rebase -i'
alias grh='git reset --hard'
alias grp='gr --patch'
alias grsh='git reset --soft HEAD~'
alias grv='git remote -v'
alias gs='git show'
alias gs.='git show --color-words="."'
alias gup='git smart-pull'
gupstation() {
  gup
  gf production
  gf staging
}

# git stashing
alias gst='git stash'
alias gstp='git stash pop'
alias gstl='git stash list'
alias gstc='git stash clear'

alias json="python -mjson.tool"
